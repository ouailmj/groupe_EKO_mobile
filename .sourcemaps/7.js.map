{"version":3,"sources":["../../src/pages/property-detail/property-detail.module.ts","../../src/pages/property-detail/property-detail.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n// import { PipesModule } from '../../pipes/pipes.module';\n\nimport { PropertyDetailPage } from './property-detail';\n\n@NgModule({\n\tdeclarations: [\n\t\tPropertyDetailPage\n\t],\n\timports: [\n\t\tIonicPageModule.forChild(PropertyDetailPage)\n\t],\n\texports: [\n\t\tPropertyDetailPage\n\t]\n})\n\nexport class PropertyListPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/property-detail/property-detail.module.ts","import { Storage } from '@ionic/storage';\nimport {Component, ViewChild} from '@angular/core';\nimport {LoadingController, IonicPage, ActionSheetController, ActionSheet, NavController, NavParams, ToastController} from 'ionic-angular';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport {PropertyService} from '../../providers/property-service-mock';\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\nimport { commentData } from './../../providers/types/eventData';\nimport { TopicProvider } from './../../providers/topic/topic';\n\n\n@IonicPage({\n\tname: 'page-property-detail',\n\tsegment: 'property/:id'\n})\n\n@Component({\n    selector: 'page-property-detail',\n    templateUrl: 'property-detail.html'\n})  \nexport class PropertyDetailPage {\n    public onCommentForm: FormGroup;\n    role:any ;\n    commentaires:commentData = {\n        auteur: \"\",\n        message: \"\",\n        conversation: \"\",\n        datePost: \"\"\n      };\n    loading: any;\n\tproperty: any;\n\tparam: number;\n    dataauteur = {\n        username: \"\",\n        datePost: \"\",\n        dateEdit: \"\",\n        type:\"\"\n    };\n    allData:Array<any>;\n    pathComment = \"/api/commentaires/\";\n    pathConv = \"/api/conversations/\";\n    constructor(\n        public loadingCtrl:LoadingController,\n        public storage:Storage,\n        private authService:AuthProvider,\n        public actionSheetCtrl: ActionSheetController, \n        public navCtrl: NavController, \n        public navParams: NavParams, \n        public propertyService: PropertyService, \n        public toastCtrl: ToastController,\n        public formBuilder: FormBuilder,\n        public topic:TopicProvider,\n\n    ) {\n        this.onCommentForm = formBuilder.group({      \n            message: ['', Validators.compose([Validators.required])],\n          });\n        this.allData = [];\n        console.log(this.allData);\n        this.showLoader();\n        this.param = this.navParams.get('id');\n\t\tthis.property = this.propertyService.getItem(this.param) ? this.propertyService.getItem(this.param) : this.propertyService.getProperties()[0];\n        this.storage.set('auteur',this.property.auteur);\n        this.authService.getUserProfiles().then(res=>{\n            this.storage.get('auteurdata').then(data => {\n                this.dataauteur.username = data.username;\n                    if(data.roles[0]==\"ROLE_SUPER_ADMIN\"){\n                        this.dataauteur.type = \"Administrateur\";\n                    }\n                    else if(data.roles[0]==\"ROLE_COLLABORATEUR\"){\n                        this.dataauteur.type = \"Collaborateur\";\n                    }\n                    else{\n                        this.dataauteur.type = \"Utilisateur\";\n                    }\n                    this.authService.getConversationComment(this.property.commentaires).then(res=>{                      \n                        this.storage.get('dataComment').then(allData=>{\n                            this.allData=allData;\n                        })                    \n                        storage.remove('dataComment');\n                    })\n                this.loading.dismiss();\n            })\n        })\n    }\n\n    showLoader(){\n        this.loading = this.loadingCtrl.create({\n            content: 'Authenticating...'\n        });\n    \n        this.loading.present();\n      }\n\n    openBrokerDetail(broker) {\n\t\tthis.navCtrl.push('page-broker-detail', {\n\t\t\t'id': 3\n\t\t});\n    }\n\n    favorite(property) {\n        this.propertyService.favorite(property)\n            .then(property => {\n                let toast = this.toastCtrl.create({\n                    message: 'Property added to your favorites',\n                    cssClass: 'mytoast',\n                    duration: 2000\n                });\n                toast.present(toast);\n            });\n    }\n\n    share(property) {\n        let actionSheet: ActionSheet = this.actionSheetCtrl.create({\n            title: 'Share via',\n            buttons: [\n                {\n                    text: 'Twitter',\n                    handler: () => console.log('share via twitter')\n                },\n                {\n                    text: 'Facebook',\n                    handler: () => console.log('share via facebook')\n                },\n                {\n                    text: 'Email',\n                    handler: () => console.log('share via email')\n                },\n                {\n                    text: 'Cancel',\n                    role: 'cancel',\n                    handler: () => console.log('cancel share')\n                }\n            ]\n        });\n\n        actionSheet.present();\n    }\n\n    delete(id:string) {\n        let actionSheet: ActionSheet = this.actionSheetCtrl.create({\n            title: 'Option',\n            buttons: [\n                {\n                    text: 'edit',\n                    handler: () => console.log('edited')\n                },\n                {\n                    text: 'delete',\n                    handler: () => this.deleteData(id , this.pathComment)\n                }\n            ]\n        });\n\n        actionSheet.present();\n    }\n    edit() {\n        let actionSheet: ActionSheet = this.actionSheetCtrl.create({\n            title: 'Option',\n            buttons: [\n                {\n                    text: 'edit',\n                    handler: () => console.log('edited')\n                },\n                {\n                    text: 'Set on answered',\n                    handler: () => console.log('answered')\n                },\n                {\n                    text: 'delete',\n                    handler: () => this.deleteData(this.property.id,this.pathConv)\n                }\n            ]\n        });\n\n        actionSheet.present();\n    }\n\n    deleteData(id:string,path:string){\n        let loader = this.loadingCtrl.create({\n            content: \"Please wait...\"\n        });\n        loader.present();\n        this.storage.get('user').then(res=>{\n            if(res.roles[0] == \"ROLE_SUPER_ADMIN\"){\n                console.log(this.property.id);\n                this.topic.DeleteConversation(id, path);\n                this.navCtrl.setRoot('page-home');\n                loader.dismiss();\n                this.presentToast(\"deleted successfully\");\n            }\n        })\n        \n    }\n\n\n\n    presentToast(msg) {\n        let toast = this.toastCtrl.create({\n          message: msg,\n          duration: 3000,\n          position: 'bottom',\n          dismissOnPageChange: true\n        });\n    \n        toast.onDidDismiss(() => {\n          console.log('Dismissed toast');\n        });\n    \n        toast.present();\n      }\n\n    onSubmit(){\n        if(this.onCommentForm.valid){\n            let loader = this.loadingCtrl.create({\n                content: \"Please wait...\"\n            });\n            loader.present();\n            let date = new Date();\n            this.commentaires.datePost = date.toDateString();\n            this.commentaires.conversation =\"/api/conversations/\" + this.property.id;\n            this.storage.get('user').then(data=>{\n                this.commentaires.auteur = \"/api/users/\" + data.id;\n                this.topic.addComment(this.commentaires).then(res=>{\n                this.navCtrl.setRoot('page-home');\n                loader.dismiss();\n                this.presentToast(\"Question created succesfully\");\n            });\n                \n            });\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/property-detail/property-detail.ts"],"sourceRoot":""}